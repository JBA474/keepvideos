/* Author: Emerson Estrella */
$("#again").click(function(){$("#hero2").fadeOut("fast");$("#hero1").fadeIn("slow")});$("#form").submit(function(){var c=$("#url").val();var b=/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/;var a=c.match(b);if(a){$("#download-btn").fadeOut("fast");$("#loading").fadeIn("slow");setTimeout("getVideo('"+a[1]+"')",2000)}else{alert("Invalid URL!");$("#url").val("");$("#url").focus()}return false});function getVideo(a){var b="b4VsluhWVh8";b=a;$.ajax({url:"http://www.youtube.com/get_video_info?video_id="+b,dataType:"text"}).done(function(h){var j=[];var c=0;h=(h+"").replace(/\+/g,"%20");h=h.replace(/url%3D/g,"\n\r\n\r<break>");h=h.replace(/sig%3D/g,"signature%3D");var o=h.split("<break>");for(var p=0;p<o.length;p++){var s={};var n=unescape(unescape(decodeURIComponent((o[p]+"").replace(/\+/g,"%20"))));n=n.replace(/="/g,"%3D%22");n=n.replace(/"/g,"%22");var e=n;if(n.length>1500){aux=n.split("&has_cc");n=aux[0]}var m=[],g;var q=n.slice(n.indexOf("?")+1).split("&");for(var f=0;f<q.length;f++){g=q[f].split("=");m.push(g[0]);m[g[0]]=unescape(g[1])}if(m.type!=undefined){s.type=m.type;if(m.type.indexOf("codecs")>0){var l=m.type.split(';+codecs="');s.type=l[0];s.codecs=l[1].replace('"',"").replace("+"," ")}}if(m.quality!=undefined){s.quality=m.quality;if(m.quality.indexOf(",")>0){var l=m.quality.split(",");s.quality=l[0]}}if(s.type&&s.quality){s.url=e;j[c]=s;c++}}var k="";k+='<h4 class="alert-heading" style="margin-top: 25px;">All video files found for your request</h4>';k+='<a id="again" style="margin-top: 25px;" class="btn btn-small btn-danger" href="#main" onclick="$(\'#hero2\').fadeOut(\'fast\');$(\'#hero1\').fadeIn(\'slow\');"><i class="icon-repeat icon-white"></i> Make Another Request</a>';k+='<table class="table table-striped musica" style="background: rgba(255,255,255,0.7); margin-top:25px;"><thead><tr><th>Quality</th><th>Format</th><th>Codecs</th><th style="text-align: right;"></th></tr></thead><tbody>';$.each(j,function(d,i){k+="\n\r<tr>";k+="<td>"+i.quality+"</td>";k+="<td>"+i.type+"</td>";if(i.codecs!=undefined){k+="<td>"+i.codecs+"</td>"}else{k+="<td>N/A</td>"}k+='<td><a class="btn btn-success pull-left" href="'+i.url+'" style="margin-right: 15px;"><i class="icon-download-alt icon-white"></i> Download this video format file</a></td>';k+="</tr>\n\r"});k+='</tbody></table><a style="margin-top: 10px; margin-bottom: 25px;" class="btn btn-small btn-danger" href="#main" onclick="$(\'#hero2\').fadeOut(\'fast\');$(\'#hero1\').fadeIn(\'slow\');"><i class="icon-repeat icon-white"></i> Make Another Request</a>';$("#vid").html(k);$("#vid").fadeIn("slow");$("#loading").hide();$("#hero1").hide();$("#hero2").fadeIn("slow");$("#download-btn").show()})};